<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contact | Idéale Peinture</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <style>
        .gradient-text {
            background-clip: text;
            -webkit-background-clip: text;
            color: transparent;
            background-image: linear-gradient(45deg, #FFD700, #e3342f);
        }
        .shadow-soft-lg {
            box-shadow: 0 10px 30px -10px rgba(0, 0, 0, 0.1);
        }
        .hover-scale {
            transition: transform 0.3s ease;
        }
        .hover-scale:hover {
            transform: translateY(-5px);
        }
        .form-input:focus {
            border-color: #FFD700;
            box-shadow: 0 0 0 3px rgba(255, 215, 0, 0.1);
        }
        .animate-fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .contact-card {
            transition: all 0.3s ease;
        }
        .contact-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px -10px rgba(0, 0, 0, 0.1);
        }
        .form-input {
            width: 100%;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 16px;
            transition: all 0.3s ease;
        }
        textarea.form-input {
            min-height: 120px;
            resize: vertical;
        }
        .mobile-menu {
            transition: max-height 0.3s ease;
            max-height: 0;
            overflow: hidden;
        }
        .mobile-menu.open {
            max-height: 1000px;
        }
    </style>
</head>
<body class="font-sans antialiased text-gray-800 bg-gray-50">
    <!-- Header -->
    <header class="backdrop-blur-md bg-yellow-300/70 shadow-lg sticky top-0 z-50 border-b border-white/20">
        <div class="container mx-auto px-4">
            <div class="flex items-center justify-between md:justify-center py-4">
                <div class="flex items-center">
                    <a href="index.html">
                        <img src="images/logo.png" alt="Idéale Peinture" class="h-12 w-auto hover:scale-105 transition-transform duration-200">
                    </a>
                </div>

                <nav class="hidden md:flex items-center space-x-2 bg-white/70 rounded-full px-4 py-2 shadow-md">
                    <a href="index.html" class="px-4 py-2 font-semibold text-gray-700 hover:text-[#e3342f] transition duration-200 rounded-full hover:bg-yellow-100">Accueil</a>
                    <a href="index.html#nos-categories" class="px-4 py-2 font-semibold text-gray-700 hover:text-[#e3342f] transition duration-200 rounded-full hover:bg-yellow-100">Nos peintures</a>
                    <a href="index.html#nos-realisations" class="px-4 py-2 font-semibold text-gray-700 hover:text-[#e3342f] transition duration-200 rounded-full hover:bg-yellow-100">Réalisations</a>
                    <a href="index.html#a-propos" class="px-4 py-2 font-semibold text-gray-700 hover:text-[#e3342f] transition duration-200 rounded-full hover:bg-yellow-100">À propos</a>
                    <a href="inspiration.html" class="px-4 py-2 font-semibold text-gray-700 hover:text-[#e3342f] transition duration-200 rounded-full hover:bg-yellow-100">Blogs & inspiration</a>
                    <a href="contact.html" class="px-4 py-2 font-semibold text-gray-700 hover:text-[#e3342f] transition duration-200 rounded-full hover:bg-yellow-100">Contact</a>
                    <a href="devenir distributeur.html" class="ml-2 px-4 py-2 bg-[#FFD700] text-[#e3342f] font-bold rounded-full shadow hover:bg-[#e3342f] hover:text-white transition duration-200">Devenir distributeur</a>
                </nav>

                <button id="mobile-menu-button" class="md:hidden text-[#e3342f] bg-white rounded-full p-2 shadow hover:bg-yellow-100 transition">
                    <i class="fas fa-bars text-2xl"></i>
                </button>
            </div>

            <div id="mobile-menu" class="mobile-menu md:hidden bg-white/90 rounded-xl shadow-lg mt-2 p-4">
                <a href="index.html" class="block px-4 py-2 rounded-full font-semibold text-gray-700 hover:text-[#e3342f] hover:bg-yellow-100 transition">Accueil</a>
                <a href="index.html#nos-categories" class="block px-4 py-2 rounded-full font-semibold text-gray-700 hover:text-[#e3342f] hover:bg-yellow-100 transition">Nos peintures</a>
                <a href="index.html#nos-realisations" class="block px-4 py-2 rounded-full font-semibold text-gray-700 hover:text-[#e3342f] hover:bg-yellow-100 transition">Réalisations</a>
                <a href="index.html#a-propos" class="block px-4 py-2 rounded-full font-semibold text-gray-700 hover:text-[#e3342f] hover:bg-yellow-100 transition">À propos</a>
                <a href="inspiration.html" class="block px-4 py-2 rounded-full font-semibold text-gray-700 hover:text-[#e3342f] hover:bg-yellow-100 transition">Blogs & inspiration</a>
                <a href="contact.html" class="block px-4 py-2 rounded-full font-semibold text-gray-700 hover:text-[#e3342f] hover:bg-yellow-100 transition">Contact</a>
                <a href="devenir-distributeur.html" class="block px-4 py-2 rounded-full font-bold bg-[#FFD700] text-[#e3342f] mt-2 shadow hover:bg-[#e3342f] hover:text-white transition">Devenir distributeur</a>
            </div>
        </div>
    </header>

    <main class="min-h-screen">
        <!-- Hero Section -->
        <section class="bg-gradient-to-br from-[#FFD700] via-yellow-400 to-yellow-300 py-20">
            <div class="container mx-auto px-4 text-center">
                <div class="max-w-4xl mx-auto">
                    <h1 class="text-5xl md:text-6xl font-bold text-gray-900 mb-6">Contactez-nous</h1>
                    <p class="text-xl text-gray-700 mb-8 max-w-2xl mx-auto">
                        Nous serions ravis d'entendre parler de vous. Remplissez le formulaire ci-dessous ou utilisez nos coordonnées directes pour tous vos projets de peinture.
                    </p>
                    <div class="flex flex-wrap justify-center gap-4">
                        <div class="flex items-center bg-white/20 rounded-full px-6 py-3 backdrop-blur-sm">
                            <i class="fas fa-phone text-[#e3342f] mr-3"></i>
                            <span class="font-semibold text-gray-800">Réponse rapide</span>
                        </div>
                        <div class="flex items-center bg-white/20 rounded-full px-6 py-3 backdrop-blur-sm">
                            <i class="fas fa-tools text-[#e3342f] mr-3"></i>
                            <span class="font-semibold text-gray-800">Devis gratuit</span>
                        </div>
                        <div class="flex items-center bg-white/20 rounded-full px-6 py-3 backdrop-blur-sm">
                            <i class="fas fa-heart text-[#e3342f] mr-3"></i>
                            <span class="font-semibold text-gray-800">Service personnalisé</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Contact Form Section -->
        <section class="py-20">
            <div class="container mx-auto px-4">
                <div class="max-w-6xl mx-auto">
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-12">
                        <!-- Formulaire -->
                        <div class="bg-white rounded-2xl shadow-soft-lg p-8 contact-card">
                            <h2 class="text-3xl font-bold gradient-text mb-2">Envoyez-nous un message</h2>
                            <p class="text-gray-600 mb-8">Remplissez le formulaire ci-dessous et nous vous répondrons rapidement.</p>
                            
                            <form action="https://getform.io/f/arogmwwb" method="POST" class="space-y-6">
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                    <div>
                                        <label for="prenom" class="block text-sm font-semibold text-gray-700 mb-2">
                                            Prénom <span class="text-red-500">*</span>
                                        </label>
                                        <input type="text" id="prenom" name="prenom" required class="form-input" placeholder="Votre prénom">
                                    </div>
                                    <div>
                                        <label for="nom" class="block text-sm font-semibold text-gray-700 mb-2">
                                            Nom <span class="text-red-500">*</span>
                                        </label>
                                        <input type="text" id="nom" name="nom" required class="form-input" placeholder="Votre nom">
                                    </div>
                                </div>
                                
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                    <div>
                                        <label for="email" class="block text-sm font-semibold text-gray-700 mb-2">
                                            Email <span class="text-red-500">*</span>
                                        </label>
                                        <input type="email" id="email" name="email" required class="form-input" placeholder="votre@email.com">
                                    </div>
                                    <div>
                                        <label for="telephone" class="block text-sm font-semibold text-gray-700 mb-2">Téléphone</label>
                                        <input type="tel" id="telephone" name="telephone" class="form-input" placeholder="+228 XX XX XX XX">
                                    </div>
                                </div>
                                
                                <div>
                                    <label for="sujet" class="block text-sm font-semibold text-gray-700 mb-2">
                                        Type de demande <span class="text-red-500">*</span>
                                    </label>
                                    <select id="sujet" name="sujet" required class="form-input">
                                        <option value="">Sélectionnez un type de demande</option>
                                        <option value="devis">Demande de devis</option>
                                        <option value="conseil">Conseil couleur</option>
                                        <option value="renseignement">Renseignement produit</option>
                                        <option value="distributeur">Devenir distributeur</option>
                                        <option value="sav">Service après-vente</option>
                                        <option value="autre">Autre</option>
                                    </select>
                                </div>
                                
                                <div>
                                    <label for="message" class="block text-sm font-semibold text-gray-700 mb-2">
                                        Message <span class="text-red-500">*</span>
                                    </label>
                                    <textarea id="message" name="message" rows="6" required class="form-input" placeholder="Décrivez votre projet..."></textarea>
                                </div>
                                
                                <div class="flex items-start gap-3">
                                    <input type="checkbox" id="rgpd" name="rgpd" required class="w-4 h-4 text-[#FFD700] border-gray-300 rounded focus:ring-[#FFD700] mt-1">
                                    <label for="rgpd" class="text-sm text-gray-700">
                                        J'accepte que mes données soient utilisées pour me recontacter. <span class="text-red-500">*</span>
                                    </label>
                                </div>
                                
                                <button type="submit" class="w-full bg-gradient-to-r from-[#FFD700] to-yellow-400 text-gray-900 font-bold py-4 px-8 rounded-lg hover:from-[#e3342f] hover:to-red-500 hover:text-white transition duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-1">
                                    <i class="fas fa-paper-plane mr-3"></i>
                                    Envoyer le message
                                    </button>
                            </form>
                        </div>

                        <!-- Informations de contact -->
                        <div class="space-y-8">
                            <div class="bg-white rounded-2xl shadow-soft-lg p-8 contact-card">
                                <h3 class="text-2xl font-bold text-gray-800 mb-6">Nos coordonnées</h3>
                                
                                <div class="space-y-6">
                                    <div class="flex items-start">
                                        <div class="flex-shrink-0 w-12 h-12 bg-[#FFD700] rounded-full flex items-center justify-center mr-4">
                                            <i class="fas fa-map-marker-alt text-gray-900"></i>
                                        </div>
                                        <div>
                                            <h4 class="font-semibold text-gray-800 mb-1">Adresse</h4>
                                            <p class="text-gray-600">Nationale N1<br>Lomé, Maritime<br>Togo</p>
                                        </div>
                                    </div>

                                    <div class="flex items-start">
                                        <div class="flex-shrink-0 w-12 h-12 bg-[#FFD700] rounded-full flex items-center justify-center mr-4">
                                            <i class="fas fa-phone text-gray-900"></i>
                                        </div>
                                        <div>
                                            <h4 class="font-semibold text-gray-800 mb-1">Téléphone</h4>
                                            <p class="text-gray-600">+228 90 792752</p>
                                        </div>
                                    </div>

                                    <div class="flex items-start">
                                        <div class="flex-shrink-0 w-12 h-12 bg-[#FFD700] rounded-full flex items-center justify-center mr-4">
                                            <i class="fas fa-envelope text-gray-900"></i>
                                        </div>
                                        <div>
                                            <h4 class="font-semibold text-gray-800 mb-1">Email</h4>
                                            <p class="text-gray-600">contact@idealepeinture.com</p>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="bg-white rounded-2xl shadow-soft-lg p-8 contact-card">
                                <h3 class="text-2xl font-bold text-gray-800 mb-6">Horaires d'ouverture</h3>
                                
                                <div class="space-y-4">
                                    <div class="flex justify-between items-center py-2 border-b border-gray-100">
                                        <span class="font-semibold text-gray-700">Lundi - Vendredi</span>
                                        <span class="text-gray-600">8h00 - 18h00</span>
                                    </div>
                                    <div class="flex justify-between items-center py-2 border-b border-gray-100">
                                        <span class="font-semibold text-gray-700">Samedi</span>
                                        <span class="text-gray-600">9h00 - 17h00</span>
                                    </div>
                                    <div class="flex justify-between items-center py-2">
                                        <span class="font-semibold text-gray-700">Dimanche</span>
                                        <span class="text-[#e3342f] font-semibold">Fermé</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
  <footer class="bg-gray-900 text-white py-12">
    <div class="container mx-auto px-4">
        <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
            <div>
                <div class="flex items-center mb-4 gap-3">
                    <div class="w-14 h-14 bg-white border-4 border-[#FFD700] flex items-center justify-center rounded-full shadow-lg overflow-hidden">
                        <img src="images/logo.png" alt="Logo Idéale Peinture" class="w-full h-full object-cover rounded-full">
                    </div>
                    <span class="flex flex-row items-end leading-tight">
                        <span class="text-2xl font-extrabold text-white tracking-tight mr-2">Idéale</span>
                        <span class="text-lg font-bold text-[#e3342f] tracking-wide">Peinture</span>
                    </span>
                </div>
                <p class="text-gray-400 mb-6">Votre spécialiste en peintures intérieures et extérieures depuis 2019.</p>

                <div class="flex space-x-4">
                    <a href="https://web.facebook.com/profile.php?id=61550743929810" target="_blank" rel="noopener noreferrer" aria-label="Facebook Idéale Peinture" class="w-10 h-10 bg-blue-600 text-white rounded-full flex items-center justify-center text-xl transition-all duration-300 hover:bg-blue-700 hover:scale-110">
                        <i class="fab fa-facebook-f"></i>
                    </a>

                    <a href="#" onclick="showWhatsappPopup()" aria-label="WhatsApp" class="w-10 h-10 bg-green-600 text-white rounded-full flex items-center justify-center text-xl transition-all duration-300 hover:bg-green-700 hover:scale-110">
                        <i class="fab fa-whatsapp"></i>
                    </a>

                    <a href="https://www.tiktok.com/@ideale.peinture" target="_blank" rel="noopener noreferrer" aria-label="TikTok Idéale Peinture" class="w-10 h-10 bg-black text-white rounded-full flex items-center justify-center text-xl transition-all duration-300 hover:bg-gray-800 hover:scale-110">
                        <i class="fab fa-tiktok"></i>
                    </a>

                    <a href="https://www.instagram.com/idealepeinturetg/" target="_blank" rel="noopener noreferrer" aria-label="Instagram Idéale Peinture" class="w-10 h-10 text-white rounded-full flex items-center justify-center text-xl bg-gradient-to-r from-purple-500 via-pink-500 to-yellow-500 transition-all duration-300 hover:scale-110">
                        <i class="fab fa-instagram"></i>
                    </a>
                </div>
            </div>

            <div>
                <h3 class="text-lg font-bold mb-4">Nos produits</h3>
                <ul class="space-y-2">
                    <li><a href="intérieur.html" class="text-gray-400 hover:text-white">Peintures Intérieures</a></li>
                    <li><a href="extérieur.html" class="text-gray-400 hover:text-white">Peintures Extérieures</a></li>
                    <li><a href="spéciale.html" class="text-gray-400 hover:text-white">Peintures Spéciales</a></li>
                </ul>
            </div>

            <div>
                <h3 class="text-lg font-bold mb-4">Nos services</h3>
                <ul class="space-y-2">
                    <li><a href="#" class="text-gray-400 hover:text-white">Conseil couleur</a></li>
                    <li><a href="#" class="text-gray-400 hover:text-white">Devis</a></li>
                    <li><a href="#" class="text-gray-400 hover:text-white">Livraison</a></li>
                    <li><a href="#" class="text-gray-400 hover:text-white">Application pro</a></li>
                    <li><a href="#" class="text-gray-400 hover:text-white">Rénovation complète</a></li>
                    <li><a href="#" class="text-gray-400 hover:text-white">Service après-vente</a></li>
                </ul>
            </div>

            <div>
                <h3 class="text-lg font-bold mb-4">Informations</h3>
                <ul class="space-y-2">
                    <li><a href="#a-propos" class="text-gray-400 hover:text-white">À propos</a></li>
                    <li><a href="#nos-realisations" class="text-gray-400 hover:text-white">Nos réalisations</a></li>
                    <li><a href="inspiration.html" class="text-gray-400 hover:text-white">Conseils & inspiration</a></li>
                    <li><a href="devenir distributeur.html" class="text-gray-400 hover:text-white">Devenir distributeur</a></li>
                </ul>
            </div>
        </div>

        <div class="border-t border-gray-800 mt-12 pt-8 flex flex-col md:flex-row justify-between items-center">
            <p class="text-gray-400 mb-4 md:mb-0">© 2025 powered by ideale peinture. Tous droits réservés.</p>
            </div>
    </div>
</footer>

<div id="whatsapp-popup" class="fixed inset-0 bg-gray-800 bg-opacity-50 flex items-center justify-center hidden z-[100]">
    <div class="bg-white p-6 rounded-lg w-96">
        <h2 class="text-xl font-semibold mb-4 text-gray-800">Choisissez un numéro WhatsApp</h2>
        <ul>
            <li class="mb-4">
                <button onclick="redirectToWhatsapp('22890792752')" class="w-full bg-green-600 text-white p-3 rounded-lg hover:bg-green-700 transition">
                    +22890792752
                </button>
            </li>
            <li>
                <button onclick="redirectToWhatsapp('98723961')" class="w-full bg-green-600 text-white p-3 rounded-lg hover:bg-green-700 transition">
                    +22898723961
                </button>
            </li>
        </ul>
        <button onclick="closeWhatsappPopup()" class="mt-4 w-full bg-gray-500 text-white p-3 rounded-lg hover:bg-gray-600 transition">
            Fermer
        </button>
    </div>
</div>

<div class="fixed bottom-6 right-6 z-50">
    <button id="chat-button" class="w-16 h-16 bg-blue-600 text-white rounded-full flex items-center justify-center shadow-lg hover:bg-blue-700 transition">
        <i class="fas fa-comment-dots text-2xl"></i>
    </button>
    
    <div id="chat-window" class="hidden absolute bottom-20 right-0 w-80 bg-white rounded-lg shadow-xl overflow-hidden">
        <div class="bg-blue-600 text-white px-4 py-3 flex justify-between items-center">
            <h3 class="font-bold">Vos commentaires</h3>
            <button id="close-chat" class="text-white hover:text-gray-200">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div id="chat-messages" class="p-4 h-64 overflow-y-auto">
            <div class="mb-4">
                <div class="bg-blue-100 text-gray-800 rounded-lg p-3 max-w-xs">
                    <p>Bonjour ! Partagez votre expérience avec nos services ou posez-nous vos questions.</p>
                </div>
                <p class="text-xs text-gray-500 mt-1" id="welcome-time"></p>
            </div>
        </div>
        
        <div class="border-t p-4">
            <div class="flex">
                <input type="text" id="chat-input" placeholder="Tapez votre message..." class="flex-grow px-4 py-2 border rounded-l-md focus:outline-none">
                <button id="send-message" class="bg-blue-600 text-white px-4 py-2 rounded-r-md hover:bg-blue-700">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>
            <p class="text-xs text-gray-500 mt-2 text-center">
                Vos commentaires nous aident à améliorer nos services
            </p>
        </div>
    </div>
</div>

<script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
<script>
// Menu mobile
document.getElementById('mobile-menu-button')?.addEventListener('click', function() { // Ajout de '?' pour éviter une erreur si le bouton n'existe pas
    document.getElementById('mobile-menu')?.classList.toggle('hidden'); // Ajout de '?'
});

// Navigation fluide
document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function (e) {
        e.preventDefault();
        const targetId = this.getAttribute('href');
        if (targetId === '#') return;
        const targetElement = document.querySelector(targetId);
        if (targetElement) {
            window.scrollTo({
                top: targetElement.offsetTop - 80,
                behavior: 'smooth'
            });
            const mobileMenu = document.getElementById('mobile-menu');
            if (mobileMenu && !mobileMenu.classList.contains('hidden')) { // Vérification ajoutée
                mobileMenu.classList.add('hidden');
            }
        }
    });
});

// Modale de commande (les fonctions restent inchangées car non incluses dans le HTML de la footer/chat)
const orderModal = document.getElementById('orderModal');
const closeModal = document.getElementById('closeModal');
const orderForm = document.getElementById('orderForm');
const productName = document.getElementById('productName');
const productInfo = document.getElementById('productInfo');
const submitButton = document.getElementById('submitButton');

let currentProduct = '';
let currentPrice = '';

document.querySelectorAll('.order-button').forEach(button => {
    button.addEventListener('click', () => {
        currentProduct = button.getAttribute('data-product');
        currentPrice = button.getAttribute('data-price') || '';
        showModal();
    });
});

function showModal() {
    if (orderModal) orderModal.style.display = 'flex';
    if (productName) productName.value = `${currentProduct} - ${currentPrice}`;
    if (productInfo) productInfo.textContent = `${currentProduct} - ${currentPrice}`;
    const nameField = document.getElementById('name');
    if (nameField) nameField.focus();
}

function closeModalFunc() {
    if (orderModal) orderModal.style.display = 'none';
    if (orderForm) orderForm.reset();
    if (submitButton) {
        submitButton.disabled = false;
        submitButton.innerHTML = '<i class="fas fa-paper-plane mr-2"></i>Envoyer ma commande';
    }
}

if (closeModal) closeModal.addEventListener('click', closeModalFunc);

if (orderModal) {
    orderModal.addEventListener('click', (e) => {
        if (e.target === orderModal) closeModalFunc();
    });
}

document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape' && orderModal && orderModal.style.display === 'flex') {
        closeModalFunc();
    }
});

// Soumission du formulaire
if (orderForm) {
    orderForm.addEventListener('submit', async (e) => {
        e.preventDefault();
        if (submitButton) {
            submitButton.disabled = true;
            submitButton.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Envoi en cours...';
        }

        try {
            const formData = new FormData(orderForm);
            const response = await fetch('https://getform.io/f/arogmwwb', {
                method: 'POST',
                body: formData
            });

            if (!response.ok) throw new Error('Erreur lors de l\'envoi');

            alert('✅ Commande envoyée avec succès !\n\nNous avons bien reçu votre commande.\nNotre équipe vous contactera sous 24 heures.');
            closeModalFunc();

        } catch (error) {
            console.error('Erreur lors de l\'envoi :', error);
            alert('Une erreur est survenue lors de l\'envoi de votre commande. Veuillez réessayer.');
            if (submitButton) {
                submitButton.disabled = false;
                submitButton.innerHTML = '<i class="fas fa-paper-plane mr-2"></i>Envoyer ma commande';
            }
        }
    });
}


// Validation en temps réel
const requiredFields = ['name', 'email', 'phone'];

function validateForm() {
    const isValid = requiredFields.every(id => {
        const field = document.getElementById(id);
        return field && field.value.trim() !== '';
    });
    if (submitButton) {
        submitButton.disabled = !isValid;
        submitButton.style.opacity = isValid ? '1' : '0.6';
    }
}

requiredFields.forEach(fieldId => {
    const field = document.getElementById(fieldId);
    if (field) {
        field.addEventListener('input', validateForm);
    }
});


// Configuration et fonctions de la popup WhatsApp (nettoyé des doublons)
const whatsappPopup = document.getElementById('whatsapp-popup');

function showWhatsappPopup() {
    if (whatsappPopup) whatsappPopup.classList.remove('hidden');
}

function closeWhatsappPopup() {
    if (whatsappPopup) whatsappPopup.classList.add('hidden');
}

function redirectToWhatsapp(number) {
    const message = encodeURIComponent("Bonjour ! Je vous contacte depuis votre site fictif.");
    window.open(`https://wa.me/${number}?text=${message}`, '_blank');
    closeWhatsappPopup(); // Close popup after redirect
}


// Configuration du chat
const chatButton = document.getElementById('chat-button');
const chatWindow = document.getElementById('chat-window');
const closeChat = document.getElementById('close-chat');
const chatMessages = document.getElementById('chat-messages');
const chatInput = document.getElementById('chat-input');
const sendMessageBtn = document.getElementById('send-message');
const welcomeTime = document.getElementById('welcome-time');

if (welcomeTime) {
    welcomeTime.textContent = new Date().toLocaleTimeString('fr-FR', {
        hour: '2-digit',
        minute: '2-digit'
    });
}

let chatHistory = JSON.parse(localStorage.getItem('idealePeintureChat')) || [];

function loadChatHistory() {
    if (!chatMessages) return;

    chatMessages.innerHTML = '';

    const welcomeMsg = document.createElement('div');
    welcomeMsg.className = 'mb-4';
    welcomeMsg.innerHTML = `
        <div class="bg-blue-100 text-gray-800 rounded-lg p-3 max-w-xs">
            <p>Bonjour ! Partagez votre expérience avec nos services ou posez-nous vos questions.</p>
        </div>
        <p class="text-xs text-gray-500 mt-1">${new Date().toLocaleTimeString('fr-FR', {
            hour: '2-digit',
            minute: '2-digit'
        })}</p>
    `;
    chatMessages.appendChild(welcomeMsg);

    chatHistory.forEach(msg => {
        addMessageToChat(msg.text, msg.sender, msg.timestamp, false);
    });

    chatMessages.scrollTop = chatMessages.scrollHeight;
}

function addMessageToChat(text, sender, timestamp, saveToStorage = true) {
    if (!chatMessages) return;

    const messageDiv = document.createElement('div');
    messageDiv.className = `mb-4 ${sender === 'user' ? 'text-right' : ''}`;

    const bubbleClass = sender === 'user'
        ? 'bg-blue-600 text-white rounded-lg p-3 max-w-xs ml-auto'
        : 'bg-gray-100 text-gray-800 rounded-lg p-3 max-w-xs';

    messageDiv.innerHTML = `
        <div class="${bubbleClass}">
            <p>${text}</p>
        </div>
        <p class="text-xs text-gray-500 mt-1 ${sender === 'user' ? 'text-right' : ''}">
            ${timestamp}
        </p>
    `;

    chatMessages.appendChild(messageDiv);
    chatMessages.scrollTop = chatMessages.scrollHeight;

    if (saveToStorage) {
        chatHistory.push({
            text: text,
            sender: sender,
            timestamp: timestamp
        });
        localStorage.setItem('idealePeintureChat', JSON.stringify(chatHistory));
    }
}

function sendUserMessage() {
    if (!chatInput) return;
    const message = chatInput.value.trim();

    if (message === '') return;

    const timestamp = new Date().toLocaleTimeString('fr-FR', {
        hour: '2-digit',
        minute: '2-digit'
    });

    addMessageToChat(message, 'user', timestamp);

    setTimeout(() => {
        const responses = [
            "Merci pour votre commentaire ! Nous prenons en compte chaque retour pour améliorer nos services.",
            "Votre avis est précieux pour nous. L'équipe Idéale Peinture vous remercie !",
            "Nous avons bien reçu votre message. Nos équipes en prendront connaissance rapidement.",
            "Merci de partager votre expérience. Nous travaillons continuellement à satisfaire nos clients.",
            "Votre feedback nous aide à progresser. Merci pour votre confiance !"
        ];

        const randomResponse = responses[Math.floor(Math.random() * responses.length)];
        const responseTimestamp = new Date().toLocaleTimeString('fr-FR', {
            hour: '2-digit',
            minute: '2-digit'
        });

        addMessageToChat(randomResponse, 'bot', responseTimestamp);
    }, 1000);

    sendCommentToEmail(message, timestamp);
    chatInput.value = '';
}

function sendCommentToEmail(message, timestamp) {
    const formData = new FormData();
    formData.append('name', 'Visiteur du site');
    formData.append('email', 'commentaire@idealepeinture.com');
    formData.append('subject', 'Nouveau commentaire sur le site');
    formData.append('message', `Commentaire reçu le ${new Date().toLocaleDateString('fr-FR')} à ${timestamp}:\n\n${message}`);

    fetch('https://getform.io/f/bwnykqga', {
        method: 'POST',
        body: formData,
        headers: {
            'Accept': 'application/json'
        }
    })
    .then(response => {
        if (response.ok) {
            console.log('Commentaire envoyé avec succès');
        } else {
            console.error('Erreur lors de l\'envoi du commentaire');
        }
    })
    .catch(error => {
        console.error('Erreur:', error);
    });
}

if (chatButton && chatWindow) {
    chatButton.addEventListener('click', function() {
        chatWindow.classList.toggle('hidden');
        loadChatHistory();
        if (!chatWindow.classList.contains('hidden') && chatInput) {
            chatInput.focus();
        }
    });
}

if (closeChat && chatWindow) {
    closeChat.addEventListener('click', function() {
        chatWindow.classList.add('hidden');
    });
}

if (sendMessageBtn) sendMessageBtn.addEventListener('click', sendUserMessage);

if (chatInput) {
    chatInput.addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
            sendUserMessage();
        }
    });
}

// Fermeture du chat en cliquant à l'extérieur
document.addEventListener('click', function(e) {
    if (chatWindow && chatButton && !chatWindow.contains(e.target) && !chatButton.contains(e.target)) {
        chatWindow.classList.add('hidden');
    }
});

// Animation du bouton de chat
setTimeout(() => {
    if (chatButton) {
        chatButton.classList.add('animate-bounce');
        setTimeout(() => {
            chatButton.classList.remove('animate-bounce');
        }, 2000);
    }
}, 3000);

// Initialiser AOS
if (typeof AOS !== 'undefined') {
    AOS.init({ duration: 800, easing: 'ease-in-out', once: true });
}
</script>

</body>
</html>
